## AUTHOR: Picarrow

# dx and dz
scoreboard players set $min rdm._ 0
execute store result score $max rdm._ if data storage zombies_evolved:0 positions[]
scoreboard players remove $max rdm._ 1
function random:true_uniform

execute if score $out rdm._ matches 0 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[0]
execute if score $out rdm._ matches 1 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[1]
execute if score $out rdm._ matches 2 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[2]
execute if score $out rdm._ matches 3 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[3]
execute if score $out rdm._ matches 4 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[4]
execute if score $out rdm._ matches 5 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[5]
execute if score $out rdm._ matches 6 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[6]
execute if score $out rdm._ matches 7 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[7]
execute if score $out rdm._ matches 8 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[8]
execute if score $out rdm._ matches 9 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[9]
execute if score $out rdm._ matches 10 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[10]
execute if score $out rdm._ matches 11 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[11]
execute if score $out rdm._ matches 12 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[12]
execute if score $out rdm._ matches 13 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[13]
execute if score $out rdm._ matches 14 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[14]
execute if score $out rdm._ matches 15 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[15]
execute if score $out rdm._ matches 16 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[16]
execute if score $out rdm._ matches 17 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[17]
execute if score $out rdm._ matches 18 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[18]
execute if score $out rdm._ matches 19 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[19]
execute if score $out rdm._ matches 20 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[20]
execute if score $out rdm._ matches 21 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[21]
execute if score $out rdm._ matches 22 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[22]
execute if score $out rdm._ matches 23 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[23]
execute if score $out rdm._ matches 24 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[24]
execute if score $out rdm._ matches 25 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[25]
execute if score $out rdm._ matches 26 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[26]
execute if score $out rdm._ matches 27 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[27]
execute if score $out rdm._ matches 28 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[28]
execute if score $out rdm._ matches 29 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[29]
execute if score $out rdm._ matches 30 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[30]
execute if score $out rdm._ matches 31 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[31]
execute if score $out rdm._ matches 32 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[32]
execute if score $out rdm._ matches 33 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[33]
execute if score $out rdm._ matches 34 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[34]
execute if score $out rdm._ matches 35 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[35]
execute if score $out rdm._ matches 36 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[36]
execute if score $out rdm._ matches 37 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[37]
execute if score $out rdm._ matches 38 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[38]
execute if score $out rdm._ matches 39 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[39]
execute if score $out rdm._ matches 40 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[40]
execute if score $out rdm._ matches 41 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[41]
execute if score $out rdm._ matches 42 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[42]
execute if score $out rdm._ matches 43 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[43]
execute if score $out rdm._ matches 44 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[44]
execute if score $out rdm._ matches 45 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[45]
execute if score $out rdm._ matches 46 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[46]
execute if score $out rdm._ matches 47 run data modify storage zombies_evolved:0 selected_position set from storage zombies_evolved:0 positions[47]

execute if score $out rdm._ matches 0 run data remove storage zombies_evolved:0 positions[0]
execute if score $out rdm._ matches 1 run data remove storage zombies_evolved:0 positions[1]
execute if score $out rdm._ matches 2 run data remove storage zombies_evolved:0 positions[2]
execute if score $out rdm._ matches 3 run data remove storage zombies_evolved:0 positions[3]
execute if score $out rdm._ matches 4 run data remove storage zombies_evolved:0 positions[4]
execute if score $out rdm._ matches 5 run data remove storage zombies_evolved:0 positions[5]
execute if score $out rdm._ matches 6 run data remove storage zombies_evolved:0 positions[6]
execute if score $out rdm._ matches 7 run data remove storage zombies_evolved:0 positions[7]
execute if score $out rdm._ matches 8 run data remove storage zombies_evolved:0 positions[8]
execute if score $out rdm._ matches 9 run data remove storage zombies_evolved:0 positions[9]
execute if score $out rdm._ matches 10 run data remove storage zombies_evolved:0 positions[10]
execute if score $out rdm._ matches 11 run data remove storage zombies_evolved:0 positions[11]
execute if score $out rdm._ matches 12 run data remove storage zombies_evolved:0 positions[12]
execute if score $out rdm._ matches 13 run data remove storage zombies_evolved:0 positions[13]
execute if score $out rdm._ matches 14 run data remove storage zombies_evolved:0 positions[14]
execute if score $out rdm._ matches 15 run data remove storage zombies_evolved:0 positions[15]
execute if score $out rdm._ matches 16 run data remove storage zombies_evolved:0 positions[16]
execute if score $out rdm._ matches 17 run data remove storage zombies_evolved:0 positions[17]
execute if score $out rdm._ matches 18 run data remove storage zombies_evolved:0 positions[18]
execute if score $out rdm._ matches 19 run data remove storage zombies_evolved:0 positions[19]
execute if score $out rdm._ matches 20 run data remove storage zombies_evolved:0 positions[20]
execute if score $out rdm._ matches 21 run data remove storage zombies_evolved:0 positions[21]
execute if score $out rdm._ matches 22 run data remove storage zombies_evolved:0 positions[22]
execute if score $out rdm._ matches 23 run data remove storage zombies_evolved:0 positions[23]
execute if score $out rdm._ matches 24 run data remove storage zombies_evolved:0 positions[24]
execute if score $out rdm._ matches 25 run data remove storage zombies_evolved:0 positions[25]
execute if score $out rdm._ matches 26 run data remove storage zombies_evolved:0 positions[26]
execute if score $out rdm._ matches 27 run data remove storage zombies_evolved:0 positions[27]
execute if score $out rdm._ matches 28 run data remove storage zombies_evolved:0 positions[28]
execute if score $out rdm._ matches 29 run data remove storage zombies_evolved:0 positions[29]
execute if score $out rdm._ matches 30 run data remove storage zombies_evolved:0 positions[30]
execute if score $out rdm._ matches 31 run data remove storage zombies_evolved:0 positions[31]
execute if score $out rdm._ matches 32 run data remove storage zombies_evolved:0 positions[32]
execute if score $out rdm._ matches 33 run data remove storage zombies_evolved:0 positions[33]
execute if score $out rdm._ matches 34 run data remove storage zombies_evolved:0 positions[34]
execute if score $out rdm._ matches 35 run data remove storage zombies_evolved:0 positions[35]
execute if score $out rdm._ matches 36 run data remove storage zombies_evolved:0 positions[36]
execute if score $out rdm._ matches 37 run data remove storage zombies_evolved:0 positions[37]
execute if score $out rdm._ matches 38 run data remove storage zombies_evolved:0 positions[38]
execute if score $out rdm._ matches 39 run data remove storage zombies_evolved:0 positions[39]
execute if score $out rdm._ matches 40 run data remove storage zombies_evolved:0 positions[40]
execute if score $out rdm._ matches 41 run data remove storage zombies_evolved:0 positions[41]
execute if score $out rdm._ matches 42 run data remove storage zombies_evolved:0 positions[42]
execute if score $out rdm._ matches 43 run data remove storage zombies_evolved:0 positions[43]
execute if score $out rdm._ matches 44 run data remove storage zombies_evolved:0 positions[44]
execute if score $out rdm._ matches 45 run data remove storage zombies_evolved:0 positions[45]
execute if score $out rdm._ matches 46 run data remove storage zombies_evolved:0 positions[46]
execute if score $out rdm._ matches 47 run data remove storage zombies_evolved:0 positions[47]

execute store result score #_dx zev._ run data get storage zombies_evolved:0 selected_position[0] 1
execute store result score #_dz zev._ run data get storage zombies_evolved:0 selected_position[1] 1

# if dx and dz are valid, proceed
scoreboard players set #is_invalid zev._ 0
execute store success score #_is_invalid zev._ if score #_dx zev._ matches 0 if score #_dz zev._ matches 0
execute if score #_is_invalid zev._ matches 0 summon minecraft:marker run function zombies_evolved:stalac/crumble/spawn_helpers_1

scoreboard players add #_attempts zev._ 1
execute if score #_attempts zev._ matches ..19 if score #_num_stalactites zev._ < #_max_stalactites zev._ run function zombies_evolved:stalac/crumble/spawn_helpers
